---
import { timeline } from '@/constants'
---

<footer transition:name="site-footer" transition:persist class="text-sm py-6 w-full">
  <div class="flex items-center justify-between">
    <button
      type="button"
      class="btn-slate border-none bg-transparent"
      data-footer-toggle
      aria-expanded="false"
    >
      About This Site
      <i class="i-ri:expand-up-down-line" />
    </button>
    <span class="text-muted-foreground/80">2025-PRESENT Â© octohash</span>
  </div>

  <div
    class="mt-4 pt-4 border-t border-border hidden"
    data-footer-panel
  >
    <div class="timeline-container">
      {
        timeline.map(event => (
          <div
            class="mb-3 gap-4 grid grid-cols-[100px_1fr] items-baseline"
          >
            <div class="text-right">{event.date}</div>
            <div>
              <div class="font-semibold">{event.title}</div>
              <div class="mt-1" set:html={event.description} />
            </div>
          </div>
        ))
      }
    </div>
  </div>
</footer>

<script is:inline>
  (() => {
    const footer = document.currentScript?.previousElementSibling
    if (!(footer instanceof HTMLElement))
      return

    const toggle = footer.querySelector('[data-footer-toggle]')
    const panel = footer.querySelector('[data-footer-panel]')
    if (!(toggle instanceof HTMLButtonElement) || !(panel instanceof HTMLElement))
      return

    toggle.addEventListener('click', () => {
      const expanded = toggle.getAttribute('aria-expanded') === 'true'
      toggle.setAttribute('aria-expanded', expanded ? 'false' : 'true')
      panel.classList.toggle('hidden', expanded)
    })
  })()
</script>
